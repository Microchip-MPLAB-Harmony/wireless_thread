<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">

<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE11"><meta name="copyright" content="(C) Copyright 2024">
<meta name="DC.rights.owner" content="(C) Copyright 2024">
<meta name="generator" content="DITA-OT"><meta name="DC.type" content="topic">
<meta name="DC.title" content="Building and running a project">
<meta name="DC.relation" scheme="URI" content="GUID-35F8786B-0912-4736-BD9F-7975E01A9D0E.html">
<meta name="DC.format" content="XHTML">
<meta name="DC.identifier" content="GUID-2F1885D9-077E-42B8-B917-35082652A9A2">
<meta name="DC.language" content="en-US">
<link rel="stylesheet" type="text/css" href="css/custom.css">
<title>Building and running a project</title>
<link rel="stylesheet" type="text/css" href="syntax-highlight.css"></head>
<body id="GUID-2F1885D9-077E-42B8-B917-35082652A9A2"><a name="GUID-2F1885D9-077E-42B8-B917-35082652A9A2"><!-- --></a>
<main role="main"><article role="article" aria-labelledby="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__GUID-2CFF89C9-486B-408A-8C99-17C5122FCDAF">
<h1 class="title topictitle1" id="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__GUID-2CFF89C9-486B-408A-8C99-17C5122FCDAF" style="">Building and running a project</h1>
<div class="body">
<p class="p">This section provides the setps for building and running projects. Please follow the instructions
            outlined in the "<a class="xref" href="GUID-10731AEE-FEA5-4059-8279-2DBFBDBAD2F0.html">Creating a new MCC Harmony project"</a> section and generate two projects. One
            project should have FTD as the device role, while the other should have MTD as the
            device role, with the CLI App included. The default settings can be used for all other
            configurations. Once the projects are created build the projects and build should be
            successful.</p>

        <p class="p">The following scenario outlines the formation of a thread network and the exchange of
            data between a leader (FTD) and an end device (MTD). Node1 serves as the leader (FTD),
            while node2 functions as the end device(MTD).</p>

        <a name="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__OL_TB1_XZY_5YB"><!-- --></a><ol class="ol" id="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__OL_TB1_XZY_5YB">
            <li class="li" id="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__GUID-EDD0609A-8983-440A-87BC-6DB973ABB942"><a name="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__GUID-EDD0609A-8983-440A-87BC-6DB973ABB942"><!-- --></a><span class="indent-level-default">1.</span>Once the projects are created right click on the project, "Clean and Build" option
                and Flash the firmwares into two WBZ451 Xplained Pro boards as shown
                        below.<p class="p"><strong class="ph b">Building the FTD project:</strong></p>
<div class="p">
                    <br><a name="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__IMAGE_S2Z_VBZ_5YB"><!-- --></a><div class="imagecenter"><img class="image imagecenter" id="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__IMAGE_S2Z_VBZ_5YB" src="GUID-A4C9835E-F203-4C92-B165-7F8536680424-low.png"></div><br>
                </div>
<p class="p"><strong class="ph b">Building the MTD project:</strong></p>
<div class="p">
                    <br><a name="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__IMAGE_KX4_PCZ_5YB"><!-- --></a><div class="imagecenter"><img class="image imagecenter" id="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__IMAGE_KX4_PCZ_5YB" src="GUID-083157AA-E49B-4AE1-9006-7C65EBA2A937-low.png"></div><br>
                </div>
<p class="p"><strong class="ph b">Flashing the projects:</strong></p>
<p class="p">Flash the FTD and MTD firmwares into each
                    device selecting in project properties &rarr; Connected Hardware Tool as shown
                    below</p>
<div class="p">
                    <br><a name="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__IMAGE_DT2_XFZ_5YB"><!-- --></a><div class="imagecenter"><img class="image imagecenter" id="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__IMAGE_DT2_XFZ_5YB" src="GUID-F24D2C6E-2542-47F4-B4A9-FBCF8B7FDF5F-low.png"></div><br>
                </div>
<div class="p">
                    <br><a name="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__IMAGE_V5Q_KGZ_5YB"><!-- --></a><div class="imagecenter"><img class="image imagecenter" id="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__IMAGE_V5Q_KGZ_5YB" src="GUID-3363CDE8-3649-4A2B-AF16-5244EC6D5E6A-low.png"></div><br>
                </div>
</li>

            <li class="li" id="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__GUID-B66EE442-78C8-417F-B571-DC37FFF48F88"><a name="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__GUID-B66EE442-78C8-417F-B571-DC37FFF48F88"><!-- --></a><span class="indent-level-default">2.</span>Open Tera Term Serial tool and Goto Setup &rarr; Serial port and set the following
                settings as shown in below.<div class="p">
                    <br><a name="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__IMAGE_ELW_GJZ_5YB"><!-- --></a><div class="imagecenter"><img class="image imagecenter" id="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__IMAGE_ELW_GJZ_5YB" src="GUID-0DE54A47-0491-4ABA-AE8D-75B6322F20E7-low.png"></div><br>
                </div>
</li>

            <li class="li" id="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__GUID-917E0A30-CDDD-429B-9CED-D43E8B7839BD"><a name="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__GUID-917E0A30-CDDD-429B-9CED-D43E8B7839BD"><!-- --></a><span class="indent-level-default">3.</span>The below commands are to be inputted
                in node1 to form the thread network with Leader role. After successful inputting of
                each comand thread stack responds as "Done". <div class="p">
                    <pre class="pre codeblock" id="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__CODEBLOCK_KTL_QXZ_5YB"><a name="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__CODEBLOCK_KTL_QXZ_5YB"><!-- --></a><code id="d1133e69" content="Node1:&#xA;&gt; dataset init new&#xA;&gt; dataset channel 19&#xA;&gt; dataset networkkey 00112233445566778899AABBCCDDEEA9&#xA;&gt; dataset commit active&#xA;&gt; ifconfig up&#xA;&gt; state&#xA;&gt; thread start&#xA;&gt; state"><strong class="ph b">Node1:</strong>
&gt; dataset init new
&gt; dataset channel 19
&gt; dataset networkkey 00112233445566778899AABBCCDDEEA9
&gt; dataset commit active
&gt; ifconfig up
&gt; state
&gt; thread start
&gt; state</code></pre>
                </div>
</li>

            <li class="li" id="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__GUID-58C62E50-4031-4420-AD38-9E20190B32AF"><a name="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__GUID-58C62E50-4031-4420-AD38-9E20190B32AF"><!-- --></a><span class="indent-level-default">4.</span>Once the above commands are executed
                the node1 forms the thread network and assisgns itself with leader role as shown in
                the below image.<div class="p">
                    <figure class="fig fignone" id="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__FIG_ZZY_X31_VYB"><a name="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__FIG_ZZY_X31_VYB"><!-- --></a><div class="figcap"><span class="fig--title-label">Figure 1. </span>Node1</div>
                        
                        <br><a name="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__IMAGE_A1Z_X31_VYB"><!-- --></a><div class="imagecenter"><img class="image imagecenter" id="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__IMAGE_A1Z_X31_VYB" src="GUID-613E9AF5-4B2B-46B5-A6C3-BA2387F4E792-low.png"></div><br>
                    </figure>

                </div>
</li>

            <li class="li" id="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__GUID-724BDB81-F13A-450D-BB76-2FBA3637B1E6"><a name="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__GUID-724BDB81-F13A-450D-BB76-2FBA3637B1E6"><!-- --></a><span class="indent-level-default">5.</span>The below commands are to be inputted
                in node2 to join the thread network formed by node1. After successful inputting of
                each comand thread stack responds as "Done". <div class="p">
                    <pre class="pre codeblock" id="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__CODEBLOCK_HGX_CZZ_5YB"><a name="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__CODEBLOCK_HGX_CZZ_5YB"><!-- --></a><code id="d1133e92" content="Node2:&#xA;&gt; dataset channel 19&#xA;&gt; dataset networkkey 00112233445566778899AABBCCDDEEA9&#xA;&gt; dataset commit active&#xA;&gt; ifconfig up&#xA;&gt; state&#xA;&gt; thread start&#xA;&gt; state"><strong class="ph b">Node2:</strong>
&gt; dataset channel 19
&gt; dataset networkkey 00112233445566778899AABBCCDDEEA9
&gt; dataset commit active
&gt; ifconfig up
&gt; state
&gt; thread start
&gt; state</code></pre>
                </div>
</li>

            <li class="li" id="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__GUID-E082847D-1597-43F9-83E3-EE880B940600"><a name="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__GUID-E082847D-1597-43F9-83E3-EE880B940600"><!-- --></a><span class="indent-level-default">6.</span>Once the above commands are executed the node2 joins the thread network formed by
                node1 with child role as shown in the image below.<div class="p">
                    <figure class="fig fignone" id="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__FIG_GX1_Z31_VYB"><a name="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__FIG_GX1_Z31_VYB"><!-- --></a><div class="figcap"><span class="fig--title-label">Figure 2. </span>Node2</div>
                        
                        <br><a name="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__IMAGE_HX1_Z31_VYB"><!-- --></a><div class="imagecenter"><img class="image imagecenter" id="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__IMAGE_HX1_Z31_VYB" src="GUID-F0137450-60F7-4233-A8FD-B92FE4A054CF-low.png"></div><br>
                    </figure>

                </div>
</li>

            <li class="li" id="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__GUID-078B94CA-3307-4C81-A139-84B29269DBBB"><a name="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__GUID-078B94CA-3307-4C81-A139-84B29269DBBB"><!-- --></a><span class="indent-level-default">7.</span>Get the IP Address of each node for further communication by using following command
                and IP addresses of node1 and node 2 are shown below<div class="p">
                    <pre class="pre codeblock" id="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__CODEBLOCK_C4W_JF1_VYB"><a name="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__CODEBLOCK_C4W_JF1_VYB"><!-- --></a><code id="d1133e116" content="&gt; ipaddr">&gt; ipaddr</code></pre>
                </div>
<div class="p">
                    <figure class="fig fignone" id="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__FIG_MRS_BJ1_VYB"><a name="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__FIG_MRS_BJ1_VYB"><!-- --></a>
                        <div class="p">
                            <figure class="fig fignone" id="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__FIG_G4P_SJ1_VYB"><a name="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__FIG_G4P_SJ1_VYB"><!-- --></a><div class="figcap"><span class="fig--title-label">Figure 3. </span>Node1</div>
                                
                                <br><a name="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__IMAGE_H4P_SJ1_VYB"><!-- --></a><div class="imagecenter"><img class="image imagecenter" id="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__IMAGE_H4P_SJ1_VYB" src="GUID-5E90A12A-5533-409A-A6C4-AAD8211F8739-low.png"></div><br>
                            </figure>

                        </div>

                    </figure>

                </div>
<div class="p">
                    <figure class="fig fignone" id="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__FIG_RY2_DJ1_VYB"><a name="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__FIG_RY2_DJ1_VYB"><!-- --></a><div class="figcap"><span class="fig--title-label">Figure 4. </span>Node2</div>
                        
                        <br><a name="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__IMAGE_SY2_DJ1_VYB"><!-- --></a><div class="imagecenter"><img class="image imagecenter" id="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__IMAGE_SY2_DJ1_VYB" src="GUID-1B53AD30-2395-4AB1-9075-9501F5933995-low.png"></div><br>
                    </figure>

                </div>
</li>

        </ol>

        <p class="p"><strong class="ph b">UDP Data Exchange between Node1 and Node2:</strong></p>

        <p class="p">Follow the below commands to send a UDP packet from node 2 to node1</p>

        <div class="p">
            <pre class="pre codeblock" id="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__CODEBLOCK_CK5_ZG1_VYB"><a name="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__CODEBLOCK_CK5_ZG1_VYB"><!-- --></a><code id="d1133e157" content="Node1:&#xA;&gt; udp open&#xA;&gt; udp bind :: 1234"><strong class="ph b">Node1:</strong>
&gt; udp open
&gt; udp bind :: 1234</code></pre>
        </div>

        <div class="p">
            <pre class="pre codeblock" id="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__CODEBLOCK_W54_HH1_VYB"><a name="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__CODEBLOCK_W54_HH1_VYB"><!-- --></a><code id="d1133e165" content="Node2:&#xA;&gt; udp open&#xA;&gt; udp send fd45:db4c:c440:c702:6296:bbb0:354:d4d7 1234 Hello"><strong class="ph b">Node2:</strong>
&gt; udp open
&gt; udp send fd45:db4c:c440:c702:6296:bbb0:354:d4d7 1234 Hello</code></pre>
        </div>

        <div class="p">
            <figure class="fig fignone" id="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__FIG_LSL_M31_VYB"><a name="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__FIG_LSL_M31_VYB"><!-- --></a><div class="figcap"><span class="fig--title-label">Figure 5. </span>Node1</div>
                
                <br><a name="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__IMAGE_MSL_M31_VYB"><!-- --></a><div class="imagecenter"><img class="image imagecenter" id="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__IMAGE_MSL_M31_VYB" src="GUID-BB4B39C0-FB4D-4652-98D8-5A5B630E348D-low.png"></div><br>
            </figure>

            <figure class="fig fignone" id="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__FIG_EKW_M31_VYB"><a name="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__FIG_EKW_M31_VYB"><!-- --></a>
                <div class="p">
                    <figure class="fig fignone" id="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__FIG_SCT_N31_VYB"><a name="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__FIG_SCT_N31_VYB"><!-- --></a><div class="figcap"><span class="fig--title-label">Figure 6. </span>Node2</div>
                        
                        <br><a name="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__IMAGE_TCT_N31_VYB"><!-- --></a><div class="imagecenter"><img class="image imagecenter" id="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__IMAGE_TCT_N31_VYB" src="GUID-F58E211C-E26A-42D8-8F9C-F57FCB8CB29C-low.png"></div><br>
                    </figure>

                </div>

            </figure>

        </div>

        <p class="p"><strong class="ph b">Block Transfer Data Exchange between Node1 and Node2:</strong></p>

        <p class="p">To execute the following scenario, kindly activate the Block Transfer feature in the
            thread MCC configuration as elaborated in the "<a class="xref" href="GUID-C3A4ADD3-79E7-493B-AF3B-2ECFD7BDD424.html">Thread SDK MCC Configuration</a>" section under Common MCC configuration options.</p>

        <p class="p">Follow the below commands to perform a block transfer from Node2 to Node1. </p>

        <div class="p">
            <pre class="pre codeblock" id="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__CODEBLOCK_CM5_R51_VYB"><a name="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__CODEBLOCK_CM5_R51_VYB"><!-- --></a><code id="d1133e213" content="Node1:&#xA;&gt; coap start&#xA;&gt; coap resourse test-resource"><strong class="ph b">Node1:</strong>
&gt; coap start
&gt; coap resourse test-resource</code></pre>
        </div>

        <div class="p">
            <pre class="pre codeblock" id="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__CODEBLOCK_UVC_V51_VYB"><a name="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__CODEBLOCK_UVC_V51_VYB"><!-- --></a><code id="d1133e221" content="Node2:&#xA;&gt; coap start&#xA;&gt; coap post fda8:6505:5286:466f:3d3b:88ae:c24b:b06 test-resource block-256 1"><strong class="ph b">Node2:</strong>
&gt; coap start
&gt; coap post fda8:6505:5286:466f:3d3b:88ae:c24b:b06 test-resource block-256 1</code></pre>
        </div>

        <div class="p">
            <figure class="fig fignone" id="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__FIG_WB2_CV1_VYB"><a name="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__FIG_WB2_CV1_VYB"><!-- --></a>
                <div class="p">
                    <figure class="fig fignone" id="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__FIG_G4D_HV1_VYB"><a name="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__FIG_G4D_HV1_VYB"><!-- --></a><div class="figcap"><span class="fig--title-label">Figure 7. </span>Node1</div>
                        
                        <br><a name="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__IMAGE_H4D_HV1_VYB"><!-- --></a><div class="imagecenter"><img class="image imagecenter" id="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__IMAGE_H4D_HV1_VYB" src="GUID-27F833C8-3781-41CD-8A39-C1E93271509C-low.png"></div><br>
                    </figure>

                    <figure class="fig fignone" id="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__FIG_RTR_HV1_VYB"><a name="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__FIG_RTR_HV1_VYB"><!-- --></a>
                        <div class="p">
                            <figure class="fig fignone" id="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__FIG_GMK_3V1_VYB"><a name="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__FIG_GMK_3V1_VYB"><!-- --></a><div class="figcap"><span class="fig--title-label">Figure 8. </span>Node2</div>
                                
                                <br><a name="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__IMAGE_HMK_3V1_VYB"><!-- --></a><div class="imagecenter"><img class="image imagecenter" id="GUID-2F1885D9-077E-42B8-B917-35082652A9A2__IMAGE_HMK_3V1_VYB" src="GUID-073E7445-0370-4B95-BF71-391F75F5D6A9-low.png"></div><br>
                            </figure>

                        </div>

                    </figure>

                </div>

            </figure>

        </div>

</div>

<nav role="navigation" class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="GUID-35F8786B-0912-4736-BD9F-7975E01A9D0E.html">Microchip Thread SDK</a></div>
</div>
</nav></article></main></body>
</html>
